(function(f){"function"!==typeof Object.create&&(Object.create=function(f){function i(){}i.prototype=f;return new i});f.FlashTang=f.FlashTang||{};f.FlashTang.PG=f.FlashTang.PG||{};f.FlashTang.PG.loadImage=function(f,i,b){var g=new Image;g.passData=b;g.onload=i;g.src=f}})(window);
(function(f,j,i,b){var g,c={currentDownMC:null,currentShowMC:null,queueDownMC:null,photoPressAble:!0,queueClickMC:null,stageIsDown:!1,isTween:!1,minSpace:10,minSpaceX2:null,stageWidth:b,stageHeight:b,massSpace:140,desTextArr:null,des_isFading:!1,isBusy:!1,memoryDes:b,desBgRimY:6,desBgRimX:8,desSpaceX:200,desSpaceY:8,init:function(a,h){g=this;this.memoryCID=this.MID=0;this.cataPhotosArr=[];this.ftArr=[];this.bgUID=f.fn.FTPolaroidGallery.bgUID++;this.qUID=f.fn.FTPolaroidGallery.qUID++;this.minSpaceX2=
2*this.minSpace;var e=this;e.el=h;e.$el=f(h);this.options=f.extend({},f.fn.FTPolaroidGallery.options,a);var d=this.options.size.split("x");this.stageWidth=Number(d[0]);this.stageHeight=Number(d[1]);f(h).css({width:this.stageWidth+"px",height:this.stageHeight+"px",position:"relative"});var c=null,d=e.$el.children(".cata").length;this.galleriesArr=[];this.cataTitlesArr=[];this.desSpaceX=Math.floor(this.stageWidth/8);for(var b=0;b<d;b++){var r=e.$el.children(".cata").eq(b).children(".pg_photo").length;
this.gArr=[];this["desTextArr"+b]=[];for(var p=0;p<r;p++){var j=e.$el.children(".cata").eq(b).children(".pg_photo").eq(p),c=j.find("#pg_des");c.css({width:e.stageWidth-2*e.desSpaceX});this["desTextArr"+b].push(c);var c=j.data("image"),o=c.split(".");this.gArr.push({thumb:o[o.length-2]+"_th."+o[o.length-1],src:c,title:j.data("title")})}this.cataTitlesArr.push(e.$el.children(".cata").eq(b).data("name"));this.galleriesArr.push({gArr:this.gArr,cataTh:e.$el.children(".cata").eq(b).data("cataimage")})}d=
"cvs_KKJHKJHNCCC44"+f.fn.FTPolaroidGallery.G;b="gallery_"+ ++f.fn.FTPolaroidGallery.G;e.$el.prepend('<canvas style="display:none;" class='+d+' id="'+b+'"></canvas>');e.$el.prepend('<div id="bgcd4017'+this.bgUID+'"><p></p></div>');this.desTextBg=f("#bgcd4017"+this.bgUID);this.desTextBg.css({position:"absolute","pointer-events":"none","border-top":"solid 1px #555555","border-left":"solid 1px #555555","border-right":"solid 1px #000000","border-bottom":"solid 1px #000000",display:"none"});this.canvas=
i.getElementById("gallery_"+f.fn.FTPolaroidGallery.G);if(!this.canvas.getContext)return d="fallback"+f.fn.FTPolaroidGallery.G2++,e.$el.prepend('<div id="'+d+'"></div>'),swfobject.embedSWF("PolaroidGallery/fallback/PolaroidGallery.swf",d,this.stageWidth,this.stageHeight,"9.0.0","expressInstall.swf",{galleriesArr:this.galleriesArr,backgroundImage:this.options.backgroundImage,fps:this.options.fps,BGM_volume:this.options.BGM_volume,fallBackData:this.options.fallBackData,cataThumbSize:this.options.cataThumbSize,
rimWidth:this.options.rimWidth,rimBottomHeight:this.options.rimBottomHeight,autoPlayDelay:this.options.autoPlayDelay,BGM:this.options.BGM,cataThumbGrid:this.options.cataThumbGrid},{quality:"high",scale:"noscale",salign:"tl",wmode:"window",bgcolor:"#222222",devicefont:"false",allowfullscreen:"true",allowscriptaccess:"always"},{}),this;this.canvas.onselectstart=function(){return!1};f("#"+b).show();this.canvas.width=this.stageWidth;this.canvas.height=this.stageHeight;this.doUpdate=!0;this.stage=new Stage(this.canvas);
this.bg=new Container;this.stage.addChild(this.bg);this.allPcmc=new Container;this.stage.addChild(this.allPcmc);this.pCmcArr=[];(this.touchAble=Touch.isSupported())&&Touch.enable(this.stage);this.stage.enableMouseOver(10);Ticker.addListener(this);Ticker.setFPS(this.options.FPS||this.options.fps);this.loadImage(this.options.backgroundImage,this.bgImgLoaded,{self:this});this.options.describe_bg_color&&this.desTextBg.css({"background-color":this.options.describe_bg_color});this.topBarCmc=new Container;
this.topBarBgCmc=new Container;this.topBarCmc.addChild(this.topBarBgCmc);this.stage.addChild(this.topBarCmc);this.loadImage("PolaroidGallery/bi-imgs/topBarBg.png",this.onTopBarBgLoaded,{self:this});this.loadImage("PolaroidGallery/bi-imgs/preloader.png",this.preloaderPngLoaded,{self:this});this.preloaderCmc=new Container;this.preloaderCmc.visible=!1;this.stage.addChild(this.preloaderCmc);d=this.options.cataThumbSize.split("x");this.cataThumWid=Number(d[0]);this.cataThumHei=Number(d[1]);d=this.options.cataThumbGrid.split("x");
this.cataThumbGrid_H=Number(d[0]);this.cataThumbGrid_v=Number(d[1]);this.cataThumSpace=2;this.cataThumFrameRimY=this.cataThumFrameRimX=60;this.topText=new Text;this.topText.text=this.cataTitlesArr[0];this.topText.color="#999999";this.topText.font="16px Arial";this.topText.textBaseline="middle";this.topText.x=136;this.topText.y=21;this.topBarCmc.addChild(this.topText);this.btnsCMC=new Container;this.topBarCmc.addChild(this.btnsCMC);this.topBarCmc.y=-50;d={startX:4,startY:4,width:32,height:32};b=new FlashTang.PG.SimpleButton({self:this});
b.onIconsLoaded=function(){};b.create(["cata_up.png","cata_over.png","cata_down.png"],{startX:4,startY:4,width:122,height:32});this.btnsCMC.addChild(b.cmc);b.cmc.y=2;b.cmc.x=2;b.onPress=function(){e.cs.show();f(e.canvas).css("cursor","auto")};if(this.options.BGM){var l=new FlashTang.PG.SimpleButton({self:this});l.onIconsLoaded=function(){};l.create(["music_up.png","music_over.png","music_down.png"],d);this.btnsCMC.addChild(l.cmc);l.cmc.y=2;l.cmc.x=this.stageWidth-8-30;var k=new FlashTang.PG.SimpleButton({self:this});
k.onIconsLoaded=function(){};k.create(["music-x_up.png","music-x_over.png","music-x_down.png"],d);this.btnsCMC.addChild(k.cmc);k.cmc.y=2;k.cmc.x=this.stageWidth-8-30;k.cmc.visible=!1}var n=new FlashTang.PG.SimpleButton({self:this});n.onIconsLoaded=function(){};n.create(["play_up.png","play_over.png","play_down.png"],d);this.btnsCMC.addChild(n.cmc);n.cmc.y=2;n.cmc.x=this.stageWidth-8-34*(this.options.BGM?2:1);var m=new FlashTang.PG.SimpleButton({self:this});m.onIconsLoaded=function(){};m.create(["pause_up.png",
"pause_over.png","pause_down.png"],d);this.btnsCMC.addChild(m.cmc);m.cmc.y=2;m.cmc.x=this.stageWidth-8-68;this.autoPlay=m.cmc.visible=!1;n.onClick=function(){m.cmc.visible=!0;n.cmc.visible=!1;e.startPlay(e.options.autoPlayDelay)};m.onClick=function(){m.cmc.visible=!1;n.cmc.visible=!0;e.stopPlay()};this.pauseBtn=m;this.playBtn=n;this.cataBlackBG=this.drawRect(0,0,1,1,"#000000");this.cataBlackBG.visible=!1;this.cataBlackBG.alpha=0.4;this.cataBlackBG.scaleX=this.stageWidth;this.cataBlackBG.scaleY=this.stageHeight;
this.stage.addChild(this.cataBlackBG);this.cataBlackBG.onPress=function(){return!1};this.cs=new FlashTang.PG.CataSelector({width:-this.cataThumSpace+(this.cataThumSpace+this.cataThumWid)*this.cataThumbGrid_H+2*this.cataThumFrameRimX,height:2*this.cataThumFrameRimY+this.cataThumHei,fw:6,frameColor:"#ffffff",bgColor:"#000000",self:this,frameAlpha:0.8,bgAlpha:0.8});this.cs.cmc.visible=!1;this.cs.cmc.x=this.stageWidth;this.stage.addChild(this.cs.cmc);this.cs.cmc.x=0.5*(this.stageWidth-this.cs.width);
this.cs.cmc.y=0.5*(this.stageHeight-this.cs.height);this.cs.loadCataThumb(this.galleriesArr,this.cataTitlesArr);this.disableCover=this.drawRect(0,0,this.stageWidth,this.stageHeight,"#000000",0);this.disableCover.alpha=0.01;this.disableCover.visible=!1;this.stage.addChild(this.disableCover);this.disableCover.onPress=function(){return!1};this.isPlayMusic=!1;d=navigator.userAgent.toLowerCase();d=-1<d.indexOf("ipad")||-1<d.indexOf("iphone");this.options.BGM_autoPlay&&!d?(this.playSound(this.options.BGM),
k.cmc.visible=!1,this.isPlayMusic=l.cmc.visible=!0):(k.cmc.visible=!0,l.cmc.visible=!1);k.onClick=function(){if(g.musicLoaded){var a=Number(g.options.BGM_volume);try{SoundJS.play("bgm",null,a,true)}catch(d){}}else e.playSound(e.options.BGM);k.cmc.visible=false;l.cmc.visible=true};l.onClick=function(){e.stopMusic();k.cmc.visible=true;l.cmc.visible=false};return this},playSound:function(a){var h,e=navigator.userAgent.toLowerCase();-1<e.indexOf("chrome")?h=".mp3":-1<e.indexOf("opera")?h=".ogg":-1<e.indexOf("firefox")?
h=".ogg":-1<e.indexOf("safari")?h=".mp3":-1<e.indexOf("msie")&&(h=".mp3");SoundJS.onLoadQueueComplete=this.doneSndLoading;SoundJS.addBatch([{name:"bgm",src:a+h,instances:1}])},stopMusic:function(){SoundJS.stop()},doneSndLoading:function(){g.musicLoaded=!0;var a=Number(g.options.BGM_volume);try{SoundJS.play("bgm",null,a,!0)}catch(h){}},startPlay:function(a){var h=this;this.autoID&&clearInterval(this.autoID);this.autoPlay=!0;this.autoID=setInterval(function(){var a=h.MID-1;h.MID==h["cataPhotosArr"+
h.memoryCID].length&&(h.MID=0,a=h["cataPhotosArr"+h.memoryCID].length-1);h.currentShowMC?h.hideCurrentPic(h["cataPhotosArr"+h.memoryCID][a].cmc,800,function(){h.showPicByID(h.memoryCID,h.MID-1)}):h.showPicByID(h.memoryCID,h.MID);h.MID++},a)},stopPlay:function(){this.autoID&&(clearInterval(this.autoID),this.pauseBtn.cmc.visible=!1,this.playBtn.cmc.visible=!0,this.autoPlay=!1)},next:function(){},prev:function(){},showPicByID:function(a,h){this.showPic(this["cataPhotosArr"+a][h].cmc,800,function(){})},
showPic:function(a,h,e){var d=this;a.parent.addChild(a);d.currentShowMC=a;var b=d.minSpace,c,g=a.self["desTextArr"+d.memoryCID][a.id].height()+2*a.self.desBgRimY+(40+d.desSpaceY);c=a.oriWid*((d.stageHeight-d.minSpaceX2-g)/a.oriHei)>d.stageWidth-d.minSpaceX2?(d.stageWidth-d.minSpaceX2)/a.oriWid:(d.stageHeight-d.minSpaceX2-g)/a.oriHei;Tween.get(a,{loop:!1,override:!0},!0).to({x:0.5*d.stageWidth,y:0.5*(d.stageHeight-d.minSpaceX2-g)+40+b,rotation:0,scaleX:c,scaleY:c},h,Ease.cubicInOut).call(function(){a.photo.isBigState=
!0;a.self.photoPressAble=!0;a.parent.addChild(a);a.self.showDesByID(a.id);a.photo.BigImageLoadCompleted?a.photo.big&&(a.photo.big.visible=!0,a.photo.big.alpha=0,Tween.get(a.photo.big,{loop:!1,override:!0},!0).to({alpha:1},500,Ease.cubicInOut).call(function(){a.photo.imgBM.visible=!1})):(a.photo.loadBigImage(),d.preloaderCmc.x=a.x,d.preloaderCmc.y=a.y);d.isBusy=!1;e&&e()});d.isBusy=!0},hideCurrentPic:function(a,h,e){var d=this;a.oldTargetX=Math.random()*(d.stageWidth-2*d.massSpace)+d.massSpace;a.oldTargetY=
Math.random()*(d.stageHeight-2*d.massSpace)+d.massSpace;Tween.get(d.currentShowMC,{loop:!1,override:!0},!0).to({x:d.currentShowMC.oldTargetX,y:d.currentShowMC.oldTargetY,rotation:d.currentShowMC.targetRotation,scaleX:1,scaleY:1},h,Ease.cubicInOut).call(function(){d.currentShowMC=null;d.photoPressAble=!0;a.photo.big&&(a.photo.big.visible=!1,a.photo.imgBM.visible=!0);e&&e()});d.hideOldDes(function(){d.memoryDes.hide();d.memoryDes=null;d.isBusy=!1});d.photoPressAble=!1;d.isBusy=!0;d.preloaderCmc.visible=
!1;a.photo.isBigState=!1},preloaderPngLoaded:function(a){var h=a.target.passData.self,a=new Bitmap(a.target);h.preloaderCmc.addChild(a);a.regX=12;a.regY=12},drawRect:function(a,h,e,d,b,c,g){var f=new Shape;c?f.graphics.beginFill(b).drawRoundRect(a,h,e,d,c).endFill():f.graphics.beginFill(b).drawRect(a,h,e,d).endFill();f.width=e;f.height=d;g&&(f.shadow=g);return f},drawFrame:function(a,b,e,d){var c=new Shape;c.graphics.beginFill(d).moveTo(0,0).lineTo(a,0).lineTo(a,e).lineTo(e,e).lineTo(e,b-e).lineTo(a-
e,b-e).lineTo(a-e,e).lineTo(a,e).lineTo(a,b).lineTo(0,b).lineTo(0,0);return c},onTopBarBgLoaded:function(a){var b=a.target.passData.self,a=new Bitmap(a.target);a.scaleX=b.stageWidth/10;b.topBarBgCmc.addChild(a);b.stage.update()},showDesByID:function(a){this.currentDes=a=this["desTextArr"+this.memoryCID][a];this.memoryDes?this.hideOldDes(function(){self.des_isFading=!0;self.showDesByIDDo();this.memoryDes=null}):this.showDesByIDDo();this.memoryDes=a;return{goSide:"bottom",height:0}},showDesByIDDo:function(){var a=
this.currentDes.width(),b=this.desBgRimX,e=this.desBgRimY,d=this.canvas.width,c=this.canvas.height,g=this.currentDes.height()+2*e,c=c-g-this.desSpaceY;this.desTextBg.css({opacity:"0",left:"0px",top:c+"px",width:a+2*b,height:g});a=0.5*(d-a-2*b);this.desTextBg.show().stop().animate({left:a+"px",opacity:this.options.describe_bg_alpha},500,"swing",function(){});b=a+b;this.currentDes.show().stop().css({opacity:"0",top:c+e}).animate({left:b+"px",opacity:"1"},500,"swing",function(){})},hideOldDes:function(a){this.desTextBg.show().stop().animate({left:"0px",
opacity:"0"},300,"swing",function(){});this.memoryDes.show().stop().animate({left:"0px",opacity:"0"},300,"swing",a)},loadImage:j.FlashTang.PG.loadImage,tick:function(){this.stage.update();this.preloaderCmc.rotation+=10},bgImgLoaded:function(a){var a=a.target,b=a.passData.self,c=new Bitmap(a);c.scaleX=b.stageWidth/a.width;c.scaleY=b.stageHeight/a.height;b.bg.addChild(c);b.stage.update();b.loadPhotos(b.galleriesArr,0);Tween.get(b.topBarCmc,{loop:!1,override:!0},!0).wait(800).to({y:0},700,Ease.cubicInOut)},
blurPhtos:function(){var a=new BoxBlurFilter(2,2,2);a.getBounds();this.pCmc.filters=[a];this.pCmc.cache(0,0,this.stageWidth,this.stageHeight)},zoomOutPhoto:function(a,c){if(a){var e=this;Tween.get(a,{loop:!1,override:!0},!0).to({x:e.currentShowMC.oldTargetX,y:e.currentShowMC.oldTargetY,rotation:e.currentShowMC.targetRotation,scaleX:1,scaleY:1},500,Ease.cubicInOut).call(function(){e.currentShowMC=null;e.photoPressAble=!0;a.photo.big&&(a.photo.big.visible=!1,a.photo.imgBM.visible=!0);c.shooCID!=b&&
e.shooPhotosByCID({cid:c.shooCID})});e.hideOldDes(function(){e.memoryDes.hide();e.memoryDes=null;e.isBusy=!1});e.photoPressAble=!1;e.isBusy=!0;e.preloaderCmc.visible=!1;a.photo.isBigState=!1}},shooPhotosByCID:function(a){this.CSID=0;this.stopPlay();for(var b=a.cid,a=this["cataPhotosArr"+a.cid],c=this,d=0;d<a.length;d++)0==d?Tween.get(a[d].cmc,{loop:!1,override:!0},!0).wait(1200).to({x:c.stageWidth+300,y:a[d].cmc.y},1E3,Ease.cubicInOut).call(function(){c["pCmc"+b].visible=!1;c.disableCover.visible=
!1;c.loadPhotos(c.galleriesArr,c.memoryCID);c["pCmc"+c.memoryCID].visible=!0}):Tween.get(a[d].cmc,{loop:!1,override:!0},!0).wait(1E3*Math.random()+200).to({x:c.stageWidth+300,y:a[d].cmc.y},1E3,Ease.cubicInOut)},convenePhotosByCID:function(a){for(var a=this["cataPhotosArr"+a],b=0;b<a.length;b++){var c=a[b].cmc,d=Math.random()*(this.stageWidth-2*this.massSpace)+this.massSpace,g=Math.random()*(this.stageHeight-2*this.massSpace)+this.massSpace;Math.random();Math.random();var f=1.2*-a[b].height;c.x=1.2*
-a[b].width;c.y=f;c.oldTargetX=d;c.oldTargetY=g;f=45*Math.random()-22.5;c.targetRotation=f;Tween.get(c,{loop:!1,override:!0},!0).wait(1E3*Math.random()).to({x:d,y:g,rotation:f},1E3,Ease.cubicInOut).call(function(){})}},loadPhotos:function(a,b){if(this["pCmc"+b])this.convenePhotosByCID(b);else{this["pCmc"+b]=new Container;this.allPcmc.addChild(this["pCmc"+b]);this["cataPhotosArr"+b]=[];this.memoryCID=b;for(var c=a[b].gArr,d=this,g=0;g<c.length;g++)this["cataPhotosArr"+b].push(null);for(g=0;g<c.length;g++)this.loadImage(c[g].thumb,
function(a){var g=a.target,a=g.passData,f=new FlashTang.PG.Photo({picWid:g.width,picHei:g.height,rim:d.options.rimWidth,BH:d.options.rimBottomHeight,rimColor:"#FFFFFF",id:g.passData.id,rim_radius:d.options.rim_radius,self:d,bigImgURL:g.passData.bigImgURL});f.addImage(g);f.addTo(a._tar_parent);f.setTitle({text:c[g.passData.id].title,font:"12px Voces",color:"#666666"});var q=Math.random()*(d.stageWidth-2*d.massSpace)+d.massSpace,i=Math.random()*(d.stageHeight-2*d.massSpace)+d.massSpace;Math.random();
Math.random();var j=1.2*-g.height;f.cmc.x=1.2*-g.width;f.cmc.y=j;f.cmc.oldTargetX=q;f.cmc.oldTargetY=i;g=45*Math.random()-22.5;f.cmc.targetRotation=g;a.self.memoryCID==a.cataNum&&Tween.get(f.cmc,{loop:!1,override:!0},!0).wait(1E3*Math.random()).to({x:q,y:i,rotation:g},1E3,Ease.cubicInOut);a.self["cataPhotosArr"+b][a.id]=f;f.cmc.self=d;f.cmc.oriWid=f.width;f.cmc.oriHei=f.height;(function(a){f.cmc.onPress=function(b){if(a.self.photoPressAble&&null==a.self.currentShowMC){a.self.moveStep=0;var c=a.x-
b.stageX,d=a.y-b.stageY;a.parent.addChild(a);b.onMouseMove=function(b){null==a.self.currentShowMC&&(a.x=b.stageX+c,a.y=b.stageY+d,a.self.moveStep++,2==a.self.moveStep&&(a.self.stopPlay(),a.self.photoPressAble=!0,1.1>a.scaleX&&Tween.get(a,{loop:!1,override:!0},!0).to({scaleX:1.1,scaleY:1.1},120,Ease.cubicInOut)))};a.self.photoPressAble=!1}};f.cmc.onClick=function(){var b=a.self;null==b.currentShowMC&&2<=a.self.moveStep&&(a.self.stopPlay(),Tween.get(a,{loop:!1,override:!0},!0).to({scaleX:1,scaleY:1},
200,Ease.cubicInOut));b.currentShowMC==a&&!b.isBusy?(a.self.stopPlay(),b.hideCurrentPic(a,800,function(){})):null==b.currentShowMC&&2>a.self.moveStep&&!b.isBusy&&(b.MID=a.id,a.self.stopPlay(),b.showPic(a,800))}})(f.cmc)},{self:this,id:g,bigImgURL:c[g].src,_tar_parent:this["pCmc"+b],cataNum:b})}}};f.fn.FTPolaroidGallery=function(a){return this.each(function(){var b=Object.create(c);b.init(a,this);f.fn.FTPolaroidGallery.galleries.push(b)})};f.fn.FTPolaroidGallery.options={fps:"30",canvas:"noname",width:b,
height:b,backgroundImage:"bi-imgs/bg.jpg",rimWidth:3,rimBottomHeight:20,size:"800x600",describe_bg_color:"#000000",describe_bg_alpha:"0.6",show_des_on:"bottom",des_stage_space_y:4,des_min_space_x:20,rim_radius:0,cataThumbSize:"160x130",cataThumbGrid:"3x1",autoPlayDelay:8E3,BGM:b,BGM_volume:0.5,BGM_autoPlay:!0,fallBackData:b};f.fn.FTPolaroidGallery.galleries=[];f.fn.FTPolaroidGallery.G=0;f.fn.FTPolaroidGallery.G2=0;f.fn.FTPolaroidGallery.bgUID=0;f.fn.FTPolaroidGallery.qUID=0})(jQuery,window,document);
(function(f,j){function i(b){this.self=b.self;this.bigImageLoaded=!1;this.rimColor=b.rimColor;this.picWid=b.picWid;this.picHei=b.picHei;this.rim=b.rim;this.paraObj=b;this.bigImgURL=b.bigImgURL;this.width=this.picWid+2*b.rim;this.height=this.picHei+this.rim+b.BH;this.BH=b.BH;this.cmc=new Container;this.cmc.regX=Math.floor(0.5*this.width);this.cmc.regY=Math.floor(0.5*this.height);this.rimMC=new Shape;this.rimMC.graphics.beginFill(b.rimColor).setStrokeStyle(1,1,1).drawRoundRect(0,0,this.width,this.height,
b.rim_radius).endFill();this.rimMC.shadow=new Shadow("#000000",1,1,6);this.cmc.id=b.id;this.cmc.addChild(this.rimMC);this.imgBM=null;this.cmc.photo=this}i.prototype.setTitle=function(b){this.textMC||(this.textMC=new Text,this.cmc.addChild(this.textMC),this.textMC.y=this.height-Math.floor(this.BH/2),this.textMC.x=this.rim);this.textMC.text=b.text;this.textMC.color=b.color;this.textMC.font=b.font;this.textMC.textBaseline="middle";this.textMC.lineWidth=this.width-2*this.rim};i.prototype.addTo=function(b){b.addChild(this.cmc)};
i.prototype.addImage=function(b){this.imgBM=new Bitmap(b);this.imgBM.x=this.rim;this.imgBM.y=this.rim;this.cmc.addChild(this.imgBM)};i.prototype.loadBigImage=function(){this.BigImageLoadCompleted||(this.self.preloaderCmc.visible=!0);this.bigImageLoaded||(this.self.loadImage(this.bigImgURL,function(b){var g=b.target,c=g.passData.photo;c.big=new Bitmap(b.target);c.big.visible=false;c.big.x=c.imgBM.x;c.big.y=c.imgBM.y;c.big.scaleY=c.big.scaleX=c.paraObj.picWid/g.width;c.cmc.addChild(c.big);if(c.self.currentShowMC===
c.cmc&&c.isBigState){c.big.visible=true;c.big.alpha=0;Tween.get(c.big,{loop:false,override:true},true).to({alpha:1},500,Ease.cubicInOut).call(function(){c.imgBM.visible=false});c.self.preloaderCmc.visible=false}c.BigImageLoadCompleted=true},{photo:this}),this.bigImageLoaded=!0)};j.FlashTang.PG.Photo=i})(jQuery,window,document);
(function(f,j){function i(b){this.self=b.self;this.cmc=new Container;return this}var b=Touch.isSupported();i.prototype.iconsLoaded=0;i.prototype.iconsTotal=0;i.prototype.enabled=!0;i.prototype.setEnable=function(b){this.enabled=b;this.cmc.alpha=b?1:0.3};i.prototype.update=function(b){"up"==b&&(this.memoryShowIcon&&(this.memoryShowIcon.visible=!1),this.memoryShowIcon=this.c0,this.memoryShowIcon.visible=!0);"over"==b&&(this.memoryShowIcon&&(this.memoryShowIcon.visible=!1),this.memoryShowIcon=this.c1,
this.memoryShowIcon.visible=!0);"down"==b&&(this.memoryShowIcon&&(this.memoryShowIcon.visible=!1),this.memoryShowIcon=this.c2,this.memoryShowIcon.visible=!0)};i.prototype.create=function(g,c){this.width=c.width;this.height=c.height;this.area=c;this.iconsTotal=g.length;for(var a=0;a<g.length;a++){var h="PolaroidGallery/bi-imgs/buttons/"+g[a],e=this["c"+a]=new Container;this.cmc.addChild(e);FlashTang.PG.loadImage(h,function(a){var b=a.target,a=a.target.passData;a.c.addChild(new Bitmap(b));a.c.visible=
!1;++a.SB.iconsLoaded==a.SB.iconsTotal&&(a.SB.onIconsLoaded&&a.SB.onIconsLoaded(a.SB),a.SB.rollMC.visible=!0,a.SB.rollMC.x=a.SB.area.startX,a.SB.rollMC.y=a.SB.area.startY,a.SB.rollMC.scaleX=a.SB.area.width?a.SB.area.width:b.width,a.SB.rollMC.scaleY=a.SB.area.width?a.SB.area.height:b.height,a.SB.update("up"))},{c:e,SB:this,id:a})}this.rollMC=new Shape;this.rollMC.graphics.beginFill("#ff0000").drawRect(0,0,1,1).endFill();this.rollMC.alpha=0.01;this.cmc.addChild(this.rollMC);var d=this;(function(a){a.onPress=
function(){b||d.update("down");d.onPress&&d.onPress()};a.onClick=function(){b||(f(d.self.canvas).css("cursor","pointer"),d.update("over"));d.onClick&&d.onClick()};a.onMouseOver=function(){b||(f(d.self.canvas).css("cursor","pointer"),d.update("over"))};a.onMouseOut=function(){b||(f(d.self.canvas).css("cursor","auto"),d.update("up"))}})(this.rollMC);return this};j.FlashTang.PG.SimpleButton=i})(jQuery,window,document);
(function(f,j,i,b){function g(b){this.id=b.id;this.selected=!1;this.headerBgHei=24;this.obj=b;this.cmc=new Container;this.width=this.obj.width;this.height=this.obj.height;this.oriBg=this.obj.self.drawRect(0,0,this.width,this.height,"#000000",0);this.oriBg.alpha=0.5;this.cmc.addChild(this.oriBg);this.bmCmc=new Container;this.cmc.addChild(this.bmCmc);this.headerMC=new Shape;this.headerCMC=new Container;this.headerBg=this.obj.self.drawRect(0,0,this.obj.width,this.headerBgHei,"#000000",0);this.headerBg.alpha=
0.6;this.headerCMC.addChild(this.headerBg);this.titleText=new Text;this.titleText.textBaseline="middle";this.titleText.y=0.5*this.headerBgHei;this.titleText.x=4;this.titleText.text=this.obj.title;this.titleText.color="#ffffff";this.titleText.font="12px Arial";this.titleText.lineWidth=this.width-8;this.headerCMC.addChild(this.titleText);this.cmc.addChild(this.headerCMC);this.rimAndTextCMC=new Container;this.rimMC=this.obj.self.drawFrame(this.width,this.height,4,"#FFFFFF");this.rimTextBg=this.obj.self.drawRect(0,
0,this.obj.width,this.headerBgHei,"#FFFFFF",0);this.rimText=new Text;this.rimText.textBaseline="middle";this.rimText.y=0.5*this.headerBgHei;this.rimText.x=4;this.rimText.text=this.obj.title;this.rimText.color="#000000";this.rimText.font="12px Arial";this.rimText.lineWidth=this.width-8;this.rimAndTextCMC.addChild(this.rimTextBg);this.rimAndTextCMC.addChild(this.rimText);this.rimAndTextCMC.addChild(this.rimMC);this.rimAndTextCMC.alpha=0;this.cmc.addChild(this.rimAndTextCMC);this.rollMC=this.obj.self.drawRect(0,
0,this.width,this.height,"#000000",0);this.cmc.addChild(this.rollMC);this.rollMC.alpha=0.01;var a=this;this.rollMC.onMouseOver=function(){Touch.isSupported()||(a.obj.self.memorySelectCataThumb!=a&&f(a.obj.self.canvas).css("cursor","pointer"),a.selected||a.showRim())};this.rollMC.onMouseOut=function(){Touch.isSupported()||(f(a.obj.self.canvas).css("cursor","auto"),a.selected||a.hideRim())};this.rollMC.onPress=function(){a.obj.self.mu.x=a.cmc.x+a.obj.self.cataThumWid-24;a.onPress&&a.onPress({id:a.id});
a.select(!0);f(a.obj.self.canvas).css("cursor","auto")}}g.prototype.load=function(){FlashTang.PG.loadImage(this.obj.url,function(b){var a=b.target,b=b.target.passData.ft,f=new Bitmap(a);f.scaleX=b.obj.width/a.width;f.scaleY=b.obj.height/a.height;b.bmCmc.addChild(f);b.oriBg.visible=!1},{ft:this,id:this.obj.id,self:this.obj.self})};g.prototype.showRim=function(c){this.rimAndTextCMC.visible=!0;this.rimAndTextCMC.alpha=0;Tween.get(this.rimAndTextCMC,{loop:!1,override:!0},!0).to({alpha:c==b?1:c.alpha},
c==b?200:c.t,Ease.linear).call(function(){})};g.prototype.hideRim=function(c){Tween.get(this.rimAndTextCMC,{loop:!1,override:!0},!0).to({alpha:0,visible:!1},c==b?200:c.t,Ease.linear).call(function(){})};g.prototype.select=function(b){b?(this.obj.self.memorySelectCataThumb!=this&&(this.obj.self.memorySelectCataThumb&&this.obj.self.memorySelectCataThumb.select(!1),this.obj.self.memorySelectCataThumb=this),this.selected=!0,this.showRim({t:0,alpha:1})):(this.selected=!1,this.hideRim())};j.FlashTang.PG.FunThumb=
g})(jQuery,window,document);
(function(f,j){function i(b){this.flipAble=!0;this.currentPage=0;this.self=b.self;this.cataBlackBG=b.self.cataBlackBG;this.cmc=new Container;this.rimFrame=b.self.drawFrame(b.width,b.height,b.fw,b.frameColor);this.rimFrame.alpha=b.frameAlpha;this.bg=b.self.drawRect(0,0,b.width-2*b.fw,b.height-2*b.fw,b.bgColor,0);this.bg.x=b.fw;this.bg.y=b.fw;this.bg.alpha=b.bgAlpha;this.width=b.width;this.height=b.height;this.cmc.addChild(this.rimFrame);this.cmc.addChild(this.bg);this.width=b.width;this.height=b.height;
this.mu=new Container;this.mu.visible=!1;this.cmc.addChild(this.mu);this.self.mu=this.mu;FlashTang.PG.loadImage("PolaroidGallery/bi-imgs/mu.png",function(b){var c=b.target.passData,b=new Bitmap(b.target);c.cs.mu.addChild(b)},{cs:this});return this}i.prototype.loadCataThumb=function(b,g){var c=this,a=this;this.totalPagesNum=Math.ceil(b.length/this.self.cataThumbGrid_H);for(var h=0;h<b.length;h++){var e=new FlashTang.PG.FunThumb({width:this.self.cataThumWid,height:this.self.cataThumHei,url:b[h].cataTh,
self:this.self,id:h,title:g[h]});e.id=h;e.onPress=function(){this.selected||(a.self.stage.addChild(a.self.disableCover),a.self.disableCover.visible=!0,a.self.currentShowMC?a.self.zoomOutPhoto(a.self.currentShowMC,{shooCID:a.self.memoryCID}):a.self.shooPhotosByCID({cid:a.self.memoryCID,delay:0}),a.self.memoryCID=this.id,a.hide(400),a.self.topText.text=a.self.cataTitlesArr[this.id])};this.self.ftArr.push(e);e.load();e.cmc.x=(e.width+this.self.cataThumSpace)*h+this.self.cataThumFrameRimX;e.cmc.x-=Math.floor(h/
this.self.cataThumbGrid_H)*(e.width+this.self.cataThumSpace)*this.self.cataThumbGrid_H;e.cmc.y=this.self.cataThumFrameRimY;this.cmc.addChild(e.cmc);0==h&&(this.mu.x=e.cmc.x+e.width-24,this.mu.y=e.cmc.y+6,this.mu.visible=!0,this.mu.alpha=0.6,e.select(!0));h>=this.self.cataThumbGrid_H&&(e.cmc.visible=!1)}this.cmc.addChild(this.mu);this.cmc.addChild(this.maskCMC);this.leftArrow=new FlashTang.PG.SimpleButton({self:this.self});this.leftArrow.create(["left_up.png","left_over.png","left_down.png"],{startX:0,
startY:0,width:26,height:52});this.leftArrow.cmc.y=0.5*(this.height-48);this.leftArrow.cmc.x=0.5*(this.self.cataThumFrameRimX-this.leftArrow.width);this.cmc.addChild(this.leftArrow.cmc);this.rightArrow=new FlashTang.PG.SimpleButton({self:this.self});this.rightArrow.create(["right_up.png","right_over.png","right_down.png"],{startX:0,startY:0,width:26,height:52});this.rightArrow.cmc.y=0.5*(this.height-48);this.rightArrow.cmc.x=this.width-this.self.cataThumFrameRimX+0.5*(this.self.cataThumFrameRimX-
this.rightArrow.width);this.cmc.addChild(this.rightArrow.cmc);this.closeBtn=new FlashTang.PG.SimpleButton({self:this.self});this.closeBtn.create(["x_up.png","x_over.png","x_down.png"],{startX:0,startY:0,width:32,height:32});this.closeBtn.cmc.y=0.5*(this.self.cataThumFrameRimY-this.closeBtn.height)+6;this.closeBtn.cmc.x=this.width-this.self.cataThumFrameRimX+0.5*(this.self.cataThumFrameRimX-this.closeBtn.width)-6;this.cmc.addChild(this.closeBtn.cmc);this.closeBtn.onPress=function(){c.hide();f(c.self.canvas).css("cursor",
"auto")};this.leftArrow.setEnable(!1);this.leftArrow.onPress=function(){if(c.flipAble&&0<c.currentPage){c.currentPage--;c.flipAble=!1;c.pageText.text="PAGE "+(c.currentPage+1)+" OF "+c.totalPagesNum;c.rightArrow.setEnable(!0);for(var a=0;a<c.self.cataThumbGrid_H;a++){var b=c.self.ftArr[(c.currentPage+1)*c.self.cataThumbGrid_H+a];if(!b)break;a==c.self.cataThumbGrid_H?Tween.get(b.cmc,{loop:!1,override:!0},!0).wait(50*a).to({alpha:0,visible:!1},100,Ease.linear):Tween.get(b.cmc,{loop:!1,override:!0},
!0).wait(50*a).to({alpha:0,visible:!1},100,Ease.linear).call(function(){for(var a,b=0;b<c.self.cataThumbGrid_H;b++){var d=c.self.ftArr[c.currentPage*c.self.cataThumbGrid_H+b];if(!d)break;a=d;d.cmc.alpha=0;d.cmc.visible=!0;Tween.get(d.cmc,{loop:!1,override:!0},!0).wait(50*b).to({alpha:1},100,Ease.linear).call(function(){a.cmc==this&&(c.flipAble=!0)})}})}}};this.rightArrow.onPress=function(){if(c.flipAble&&c.currentPage<c.totalPagesNum-1){c.currentPage++;c.flipAble=!1;c.leftArrow.setEnable(!0);c.pageText.text=
"PAGE "+(c.currentPage+1)+" OF "+c.totalPagesNum;for(var a=0;a<c.self.cataThumbGrid_H;a++){var b=c.self.ftArr[(c.currentPage-1)*c.self.cataThumbGrid_H+a];a==c.self.cataThumbGrid_H?Tween.get(b.cmc,{loop:!1,override:!0},!0).wait(50*a).to({alpha:0,visible:!1},100,Ease.linear):Tween.get(b.cmc,{loop:!1,override:!0},!0).wait(50*a).to({alpha:0,visible:!1},100,Ease.linear).call(function(){for(var a,b=0;b<c.self.cataThumbGrid_H;b++){var d=c.self.ftArr[c.currentPage*c.self.cataThumbGrid_H+b];if(!d)break;a=
d;d.cmc.alpha=0;d.cmc.visible=!0;Tween.get(d.cmc,{loop:!1,override:!0},!0).wait(50*b).to({alpha:1},100,Ease.linear).call(function(){a.cmc==this&&(c.flipAble=!0)})}})}}};this.pageText=new Text;this.pageText.text="PAGE 1 OF 2";this.pageText.color="#666666";this.pageText.font="10px Arial";this.pageText.textBaseline="middle";this.pageText.x=this.self.cataThumFrameRimX;this.pageText.y=0.5*this.self.cataThumFrameRimY;this.cmc.addChild(this.pageText);b.length<=this.self.cataThumbGrid_H&&(this.rightArrow.cmc.visible=
this.leftArrow.cmc.visible=!1)};i.prototype.show=function(b){this.self.isPlayingWhenChangeCata=this.self.autoPlay;this.self.memoryCIDForAutoPlay=this.self.memoryCID;this.self.stopPlay();b=b?b:0;this.cataBlackBG.alpha=0;this.cataBlackBG.visible=!0;Tween.get(this.cataBlackBG,{loop:!1,override:!0},!0).wait(b).to({alpha:0.8},500,Ease.cubicInOut).call(function(){});this.cmc.alpha=0;this.cmc.x=this.self.stageWidth;this.cmc.visible=!0;Tween.get(this.cmc,{loop:!1,override:!0},!0).wait(200+b).to({alpha:1,
x:0.5*(this.self.stageWidth-this.width)},700,Ease.cubicInOut).call(function(){})};i.prototype.hide=function(b){var f=this,b=b?b:0;this.cataBlackBG.visible=!0;Tween.get(this.cataBlackBG,{loop:!1,override:!0},!0).wait(500+b).to({alpha:0,visible:!1},300,Ease.cubicInOut).call(function(){if(f.self.memoryCIDForAutoPlay==f.self.memoryCID){if(f.self.isPlayingWhenChangeCata)f.self.playBtn.onClick()}else f.self.MID=0});this.cmc.visible=!0;Tween.get(this.cmc,{loop:!1,override:!0},!0).wait(b).to({alpha:0,x:-this.width,
visible:!1},500,Ease.cubicInOut).call(function(){})};j.FlashTang.PG.CataSelector=i})(jQuery,window,document);